---

title : "쉘 스크립트(shell script) 사용하기 1"
date : 2019-06-02 10:00:00 + 0000
tags: Linux
category: Language

---

# Intro
이번 포스트에서는 쉘 스크립트에 대해 알아보고, 사용 방법을 다룬다. 전반적으로 "이것이 우분투 리눅스다" 책을 참고하였고, 공부한 내용을 정리하였다.

***

# 1. 쉘(shell) 이란?

쉘은 사용자가 입력한 명령을 해석해서 커널에 전달하거나, 커널의 처리 결과를 사용자에게 전달하는 역할을 한다.

## 1-1. 쉘 명령문 형식

쉘 명령문의 형식은 다음과 같다.

```
{프롬프트} {명령어} {옵션} {인자}

ex) # cd ~
ex) # ls -al
ex) # rm -rf testdir
ex) # cat test.txt
```

## 1-2. 쉘 환경변수

쉘은 다양한 환경변수 값을 설정할 수 있는데, 리눅스의 주요 환경변수 목록은 아래와 같다.

환경변수 | 설명
--- | ---
HOME | 현재 사용자의 홈디렉토리
PATH | 실행 파일을 찾는 디렉토리 경로
LANG | 기본 지원 언어
PWD | 사용자의 현재 작업 디렉토리
TERM | 로그인 터미널 타입
SHELL | 로그인시 사용하는 쉘
USER | 현재 사용자의 이름
DISPLAY | X 디스플레이 이름
HOSTNAME | 호스트 이름
USERNAME | 현재 사용자 이름
OSTYPE | 운영체제 타입


현재 설정된 환경 변수는 `echo ${환경변수 이름}` 명령어를 통해 확인할 수 있다.
```
ex) echo $HOME
ex) echo $HOSTNAME
```

환경변수 설정 값을 변경하려면 `export {환경변수}={값}` 명령어를 실행하면 된다. 그 외의 환경변수는 `printenv` 명령어로 확인할 수 있다. 단, 일부 환경변수는 `printenv` 명령을 실행해도 출력되지 않는다.

***

# 2. 쉘 스크립트 사용해보기

쉘 스크립트도 일반적인 프로그래밍 언어와 비슷하게 변수, 반복문, 제어문 등을 사용할 수 있다.

## 2-1. 쉘 스크립트 작성하기

아래와 같이 간단한 쉘 스크립트를 작성하고 script.sh으로 저장해보자.

```
#!/bin/sh
echo "User Name: " $USER
echo "User Home Directory: " $HOME
exit 0
```

위의 코드를 간단히 설명하면 다음과 같다.
- 1행: bash를 사용하겠다는 의미로, 쉘 스크립트 작성시 첫 행에 반드시 입력해야한다.
- 2, 3행: echo 명령은 화면에 출력하는 명령이며, 먼저 문자를 출력하고 ${환경변수}에 해당하는 값을 출력한다.
- 4행: 종료 코드를 반환하며, 0은 쉘 스크립트 실행 성공을 의미한다.

## 2-2. 쉘 스크립트 실행하기

쉘 스크립트를 실행하는 방법에는 크게 두 가지가 있다.

*1) sh 명령으로 실행*

```
sh {실행파일 이름}
ex) sh script.sh

[실행 결과]
User Name:  rin_gu
User Home Directory:  /home/rin_gu
```

*2) 파일 권한을 실행 가능하게 변경하고 실행*

```
# chmod +x {실행파일 이름}
# ./{실행파일 경로}

ex)
# chmod +x script.sh
# ./script.sh

[실행 결과]
User Name:  rin_gu
User Home Directory:  /home/rin_gu
```

## 3. 변수

쉘 스크립트 변수 사용시 주의해야할 특징은 다음과 같다.
- 변수를 사용하기 전에 미리 선언하지 않으며, 처음 변수에 값이 할당되면 자동으로 변수가 생성된다.
- 변수에 넣는 모든 값을 '문자열'로 취급한다.
- 변수 이름의 대소문자를 구분한다.
- 변수를 대입할 때 '=' 좌우에 공백이 없어야 한다.

![Shell1](/assets/images/2019-06-02-Shell1/1.png){: width="900" height="700"}

## 3-1. 변수의 입출력

'$' 라는 문자가 들어간 글자를 출력하려면 ''로 묶어주거나 앞에 '\'를 붙여줘야 한다.

```
#!/bin/sh
var="Hi Shell"
echo $var

echo '$var'
echo \$var
exit 0

[실행 결과]
Hi Shell
$var
$var
```

변수의 입력과 출력은 다음과 같이 사용할 수 있다.
```
#!/bin/sh
echo "값을 입력하세요: "
read var

echo "입력된 값은 " $var "입니다."
exit 0

[실행 결과]
값을 입력하세요:
shell script study
입력된 값은  shell script study 입니다.
```

## 3-2. 숫자 계산
변수에 넣은 값은 모두 문자열이 되므로, shell script에서 연산을 하기 위해서는 expr 키워드를 사용해야한다.
shell script에서 숫자 계산을 하기 위한 규칙은 다음과 같다.
- 수식과 함께 역따옴표로 묶어줘야 한다.
- 수식에 괄호를 사용하기 위해서는 그 앞에 역슬래시를 붙여줘야 한다.
- 곱하기 기호를 사용할 때도 그 앞에 역슬래시를 붙여줘야 한다.

```
#!/bin/sh
n1=10
n2=$n1+20
echo $n2

n3=`expr $n1 + 20`
echo $n3

n4=`expr \( $n1 + 20 \) / 10 \* 2`
echo $n4

exit 0

[실행 결과]
10+20
30 // ※ 각 단어를 띄어쓰기해야하는 것에 주의
6
```

## 3-3. 파라미터 변수
파라미터 변수는 $0, $1, $2 등의 형태를 가지며, 아래와 같이 매칭된다.

명령어 | 파라미터 1 | 파라미터 2 | 파라미터 n...
--- | --- | --- | ---
$0 | $1 | $2 | $n...

예를 들면 다음과 같다.

./script | 1 | 2
--- | --- | ---
$0 | $1 | $2

```
#!/bin/sh
echo "실행파일 이름: <$0>"
echo "첫 번째 파라미터: <$1>."
echo "두 번째 파라미터: <$2>."
echo "전체 파라미터는 <$*>이다."
exit 0

[실행 결과]
실행파일 이름: <./script.sh>
첫 번째 파라미터: <1>.
두 번째 파라미터: <2>.
전체 파라미터는 <1 2>이다.
```
